<mvc:View controllerName="project1.controller.MainView"
    xmlns:mvc="sap.ui.core.mvc" displayBlock="true"
    xmlns="sap.m"
    xmlns:core="sap.ui.core"
    xmlns:l="sap.ui.layout"
    xmlns:f="sap.f"
    xmlns:card="sap.f.cards">

    <Page id="compliancePage" title="HR Compliance &amp; Reporting Hub" titleAlignment="Center">
        
        <headerContent>
            <Button id="btnAlerts" icon="sap-icon://bell" type="Transparent" text="3 Alerts" press=".onPressAlerts"/>
            <Avatar id="userAvatar" displaySize="XS" />
        </headerContent>

        <content>
            <VBox id="mainLayout" class="sapUiSmallMargin">
                
                <!-- SECTION 1: DASHBOARD TILES -->
                <Title id="titleOverview" text="Executive Overview" titleStyle="H2" class="sapUiSmallMarginBottom"/>
                <HBox id="tileLayout" wrap="Wrap" justifyContent="SpaceBetween">
                    <GenericTile id="tileScore" class="sapUiTinyMarginBegin sapUiTinyMarginTop" header="Compliance Score" subheader="Monthly Trend" press=".onPressTile">
                        <TileContent id="contentScore" footer="Oct 2025">
                            <NumericContent id="numScore" value="98.5" icon="sap-icon://line-chart" valueColor="Good" indicator="Up" />
                        </TileContent>
                    </GenericTile>

                    <GenericTile id="tileViolations" class="sapUiTinyMarginBegin sapUiTinyMarginTop" header="Active Violations" subheader="Action Required" press=".onPressTile" frameType="OneByOne">
                        <TileContent id="contentViolations" footer="Critical">
                            <NumericContent id="numViolations" value="3" icon="sap-icon://alert" valueColor="Error" />
                        </TileContent>
                    </GenericTile>

                    <GenericTile id="tileReports" class="sapUiTinyMarginBegin sapUiTinyMarginTop" header="Reports Generated" subheader="Govt Submission" press=".onPressTile">
                        <TileContent id="contentReports" footer="This Month">
                            <NumericContent id="numReports" value="12" icon="sap-icon://pdf-attachment" valueColor="Neutral"/>
                        </TileContent>
                    </GenericTile>
                </HBox>

                <!-- SECTION 2: REPORT GENERATOR -->
                <Title id="titleReporting" text="Statutory Reporting" titleStyle="H2" class="sapUiSmallMarginTop sapUiSmallMarginBottom"/>
                
                <Panel id="panelReport" headerText="Generate New Report" expandable="true" expanded="true" width="auto" class="sapUiResponsiveMargin">
                    <content>
                        <VBox id="formLayout">
                            <Label id="lblType" text="Select Form Type:" />
                            <Select id="reportTypeSelect" width="100%">
                                <items>
                                    <core:Item id="itemEPF" key="EPF" text="EPF (KWSP) Borang A" />
                                    <core:Item id="itemSOCSO" key="SOCSO" text="SOCSO (PERKESO) Form 8A" />
                                    <core:Item id="itemTAX" key="TAX" text="Income Tax CP39" />
                                </items>
                            </Select>
                            
                            <Label id="lblDate" text="Select Month:" class="sapUiSmallMarginTop"/>
                            <DatePicker id="reportDate" displayFormat="MM-yyyy" placeholder="Select Month" width="100%"/>

                            <Button id="btnGenerate" text="Generate Now" type="Emphasized" icon="sap-icon://process" class="sapUiSmallMarginTop" press=".onGenerateReport"/>
                        </VBox>
                    </content>
                </Panel>

                <!-- SECTION 3: HISTORY TABLE -->
                <Title id="titleHistory" text="Generation History" titleStyle="H2" class="sapUiSmallMarginTop"/>
                <Table id="historyTable" items="{/history}">
                    <columns>
                        <Column id="colType"><Text id="txtColType" text="Report Type" /></Column>
                        <Column id="colPeriod"><Text id="txtColPeriod" text="Period" /></Column>
                        <Column id="colStatus"><Text id="txtColStatus" text="Status" /></Column>
                        <Column id="colAction" hAlign="End"><Text id="txtColAction" text="Action" /></Column>
                    </columns>
                    <items>
                        <ColumnListItem id="historyItemTemplate">
                            <cells>
                                <ObjectIdentifier id="cellType" title="{type}" />
                                <Text id="cellDate" text="{date}" />
                                <ObjectStatus id="cellStatus" text="{status}" state="{state}" />
                                <Button id="cellBtnDownload" icon="sap-icon://download" type="Transparent" />
                            </cells>
                        </ColumnListItem>
                    </items>
                </Table>

            </VBox>
        </content>
    </Page>
</mvc:View>